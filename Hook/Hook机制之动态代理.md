## [Hook机制之动态代理](http://weishu.me/2016/01/28/understand-plugin-framework-proxy-hook/)

我们知道代理有比原始对象更为强大的能力，如：我们(原始对象)不能到国外买东西，但是代理(代理对象)可以帮我们到国外买东西；由此，如果我们自己创建代理对象，然后把原始对象替换为我们的代理对象，那么就可以让这个代理对象为所欲为了，修改参数，替换返回值，我们称之为 **Hook**

>- 代理可以实现方法增强，比如常用的日志，缓存等；
- 实现方法拦截，通过代理方法修改原方法的参数和返回值，从而实现某种不可告人的目的

|  名词     |   解释     |      备注     |
| ----- | :-------: | :-------: |
|  Hook点 |  被Hook的对象 | 容易Hook的对象：即容易被找到的对象，**静态变量** 和 **单例**，尽量Hook  public 的对象和方法，非 public不保证每个版本都一样，需要适配 |
| 调用链 | 需分析预Hook的方法、对象的调用链，找出合适Hook点 | 采用合适的代理方式，如果是接口可以用动态代理； 如果是类可以手动写代理，也可以使用开源库 **cglib** (可以做到基于类的动态代理) |
|  偷梁换柱 | 用代理对象替换原始对象 | -- |
